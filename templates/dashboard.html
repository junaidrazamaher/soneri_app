{% extends "base.html" %}
{% block content %}
<h3 class="mb-3">Records Dashboard</h3>

<table id="recordsTable" class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>#</th>
      <th>Full Name</th>
      <th>Account No</th>
      <th>Type</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for r in records %}
    <tr>
      <td>{{ loop.index }}</td>
      <td>{{ r.full_name }}</td>
      <td>{{ r.account_no }}</td>
      <td>{{ r.account_type }}</td>
      <td>{{ r.email }}</td>
      <td>{{ r.phone }}</td>
      <td>{{ r.status }}</td>
      <td>
        <a class="btn btn-sm btn-info" title="View" href="{{ url_for('view_record', rid=r._id) }}"><i class="fa fa-eye"></i></a>
        <a class="btn btn-sm btn-warning" title="Edit" href="{{ url_for('edit_record', rid=r._id) }}"><i class="fa fa-edit"></i></a>
        <form method="post" action="{{ url_for('delete_record', rid=r._id) }}" style="display:inline" onsubmit="return confirm('Delete this record?');">
          <button class="btn btn-sm btn-danger" title="Delete"><i class="fa fa-trash"></i></button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

{% block scripts %}
<script>
  $(document).ready(function(){
    $('#recordsTable').DataTable({
      "pageLength": 10,
      "order": [[0, "desc"]]
    });
  });
</script>
{% endblock %}
